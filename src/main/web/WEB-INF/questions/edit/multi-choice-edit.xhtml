<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h3>Multi choice question</h3>
    <p:column>
        <p:inputTextarea id="multiText" required="#{param['survey:createMultiChoiceQuestion'] != null}"
                         value="#{multipleChoiceQuestionController.text}"
                         maxlength="300" rows="3" cols="80"
                         placeholder="Question text"
                         style="width:97%;"/>
        <p:message for="multiText"/>
    </p:column>
    <p:column>
        <p:selectBooleanCheckbox id="requiredMulti" value="#{multipleChoiceQuestionController.required}"/>
        <p:outputLabel for="requiredMulti" value="Required" style="margin-left:0.3em;"/>
        <p:message for="requiredMulti"/>
    </p:column>
    <p:panelGrid columns="1" rendered="#{not empty multipleChoiceQuestionController.choices}">
        <ui:repeat id="choiceRender"  value="#{multipleChoiceQuestionController.choices}" var="choice">
            <h:outputText>#{choice.text}</h:outputText>
            <br/>
            <p:commandButton actionListener="#{multipleChoiceQuestionController.removeChoice(choice)}"
                             value="Remove" icon="fa fa-remove"
                             immediate="true"
                             update="survey"/>
            <p:commandButton actionListener="#{multipleChoiceQuestionController.editChoice(choice)}"
                             value="Edit" icon="fa fa-edit"
                             update="survey"/>
            <br/>
            <br/>
        </ui:repeat>
    </p:panelGrid>
    <p:panelGrid columns="3">
        <p:inputText id="multiChoice" required="#{param['survey:saveMultiChoice'] != null}"
                     value="#{multipleChoiceQuestionController.choiceText}"
                     maxlength="200" rows="2" cols="100"
                     placeholder="Choice"/>
        <p:commandButton value="#{multipleChoiceQuestionController.getSaveButtonName()}"
                         id="saveMultiChoice"
                         action="#{multipleChoiceQuestionController.saveChoice}"
                         update="survey"/>
        <p:commandButton value="Cancel"
                         id="cancelEditMultiChoice"
                         action="#{multipleChoiceQuestionController.cancelEdit}"
                         update="survey"
                         rendered="#{multipleChoiceQuestionController.edit}"/>
    </p:panelGrid>
    <p:message for="multiChoice"/>
    <p:messages id="multipleChoiceMessage" redisplay="false"/>
    <br/>
    <p:commandButton value="Save question"
                     id="createMultiChoiceQuestion"
                     action="#{multipleChoiceQuestionController.saveQuestion}"
                     update="survey"/>
</ui:composition>